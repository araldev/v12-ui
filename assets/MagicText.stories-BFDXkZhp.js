import{j as g}from"./jsx-runtime-BvswzT14.js";import{r as x}from"./iframe-DRKh4GYv.js";import{u as v}from"./useDataTheme-B73AofCh.js";class y{canvas;ctx;particles=[];mouse=null;animationId=null;dpr;config;constructor(t,e){this.canvas=t;const i=t.getContext("2d");if(!i)throw new Error("No se pudo obtener el contexto 2D del canvas");this.ctx=i,this.dpr=window.devicePixelRatio||1,this.config=e,this.setupCanvas(),this.generateParticles(),this.animate=this.animate.bind(this),this.animate()}setupCanvas(){const t=this.canvas.getBoundingClientRect();this.canvas.width=t.width*this.dpr,this.canvas.height=t.height*this.dpr,this.canvas.style.width=`${t.width}px`,this.canvas.style.height=`${t.height}px`,this.ctx.scale(this.dpr,this.dpr),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality&&(this.ctx.imageSmoothingQuality="high")}createTextMask(){return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font=`bold ${this.config.fontSize||80}px ${this.config.fontFamily||"sans-serif"}`,this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle=`${this.config.textColor||"#fff"}`,this.ctx.fillText(this.config.text,this.canvas.width/2,this.canvas.height/2),this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)}extractPositions(t){const e=[],i=t.width*t.height,n=Math.max(1,Math.floor(Math.sqrt(i/this.config.particles)));for(let o=0;o<t.height;o+=n)for(let s=0;s<t.width;s+=n){const a=(o*t.width+s)*4;t.data[a+3]>128&&e.push({x:s,y:o})}return e}generateParticles(){const t=this.createTextMask(),i=this.extractPositions(t).sort(()=>Math.random()-.5);this.particles=i.slice(0,Math.min(this.config.particles,i.length)).map(n=>({tx:n.x,ty:n.y,x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,vx:0,vy:0}))}updateParticle(t){const e=t.tx-t.x,i=t.ty-t.y;if(t.vx+=e*this.config.returnSpeed,t.vy+=i*this.config.returnSpeed,t.vx*=this.config.friction,t.vy*=this.config.friction,t.x+=t.vx,t.y+=t.vy,this.mouse){const n=this.mouse.x-t.x,o=this.mouse.y-t.y,s=Math.hypot(n,o);if(s<this.config.repulsion&&s>0){const a=(this.config.repulsion-s)/this.config.repulsion,c=10;t.vx-=n/s*a*c,t.vy-=o/s*a*c}t.vx+=e*this.config.returnSpeed*.5,t.vy+=i*this.config.returnSpeed*.5}else t.vx+=e*this.config.returnSpeed,t.vy+=i*this.config.returnSpeed}drawParticles(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(const t of this.particles)this.updateParticle(t),this.ctx.fillStyle=`${this.config.textColor||"#fff"}`,this.ctx.beginPath(),this.ctx.arc(t.x,t.y,this.config.dotSize,0,Math.PI*2),this.ctx.fill()}handleMouseMove=t=>{const e=this.canvas.getBoundingClientRect();this.mouse={x:(t.clientX-e.left)*(this.canvas.width/e.width),y:(t.clientY-e.top)*(this.canvas.height/e.height)}};handleMouseLeave=()=>{this.mouse=null};animate(){this.drawParticles(),this.canvas.addEventListener("mousemove",this.handleMouseMove),this.canvas.addEventListener("mouseleave",this.handleMouseLeave),this.animationId=requestAnimationFrame(this.animate)}destroy(){this.canvas.removeEventListener("mousemove",this.handleMouseMove),this.canvas.removeEventListener("mouseleave",this.handleMouseLeave),this.animationId&&cancelAnimationFrame(this.animationId)}}function d({text:r="Magic Text",particles:t=1e5,dotSize:e=1.5,repulsion:i=100,friction:n=.82,returnSpeed:o=.01,fontFamily:s="sans-serif",fontSize:a=80,textColor:c}){const{theme:l}=v(),u=c||(l==="dark"?"#fff":"#000");console.log("Theme:",l,"Color detected:",u);const f=x.useRef(null);return x.useEffect(()=>{const m=f.current;if(!m)return;const p=new y(m,{text:r,particles:t,dotSize:e,repulsion:i,friction:n,returnSpeed:o,fontFamily:s,fontSize:a,textColor:u});return()=>{p&&p.destroy()}},[r,t,e,i,n,o,s,a,l,c]),g.jsx("canvas",{ref:f,className:"block mx-auto",style:{width:"100%",height:"100%"}})}d.__docgenInfo={description:"",methods:[],displayName:"MagicText",props:{text:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Magic Text'",computed:!1}},particles:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"100000",computed:!1}},dotSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1.5",computed:!1}},repulsion:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"100",computed:!1}},friction:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.82",computed:!1}},returnSpeed:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.01",computed:!1}},fontFamily:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'sans-serif'",computed:!1}},fontSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"80",computed:!1}},textColor:{required:!1,tsType:{name:"literal",value:"`#${string}`"},description:""}}};const w={title:"Components/MagicText",tags:["autodocs"],parameters:{layout:"fullscreen",docs:{story:{height:"100%",width:"100%"}}},component:d,argTypes:{text:{type:"string",description:"The text to display in the magic effect",control:"text"},particles:{type:"number",description:"Number of particles in the effect",control:"number"},dotSize:{type:"number",description:"Size of each particle dot",control:"number"},repulsion:{type:"number",description:"Repulsion force distance between mouse and particles",control:"number"},friction:{type:"number",description:"Friction applied to particles movement",control:"number"},returnSpeed:{type:"number",description:"Speed at which particles return to their original position",control:"number"},fontFamily:{type:"string",description:"Font family for the text",control:"text"},fontSize:{type:"number",description:"Font size for the text in pixels",control:"number"},textColor:{type:"string",description:"Color of the text in hex format (#RRGGBB)",control:"color"}}},h={args:{text:"Magic Text",particles:1e5,dotSize:1.5,repulsion:100,friction:.82,returnSpeed:.01,fontFamily:"sans-serif",fontSize:80},render:r=>g.jsx(d,{...r})};h.parameters={...h.parameters,docs:{...h.parameters?.docs,source:{originalSource:`{
  args: {
    text: 'Magic Text',
    particles: 100000,
    dotSize: 1.5,
    repulsion: 100,
    friction: 0.82,
    returnSpeed: 0.01,
    fontFamily: 'sans-serif',
    fontSize: 80
  },
  render: args => <MagicText {...args} />
}`,...h.parameters?.docs?.source}}};const T=["Default"];export{h as Default,T as __namedExportsOrder,w as default};
